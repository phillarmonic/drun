version: 2.0

task "system info" means "Display comprehensive system information":
	info "🖥️  System Information Report"
	step "Gathering system details..."

	info "📁 Current directory: {pwd}"
	info "📂 Directory name: {pwd('basename')}"
	info "🌐 Hostname: {hostname}"
	info "🕒 Current time: {now.format('2006-01-02 15:04:05')}"
	info "📅 Today's date: {now.format('Monday, January 2, 2006')}"

	success "System information gathered successfully!"

task "git info" means "Display git repository information":
	info "📋 Git Repository Information"
	step "Checking git status..."

	info "🔗 Full commit hash: {current git commit}"
	info "🏷️  Short commit hash: {current git commit('short')}"

	success "Git information retrieved!"

task "environment check" means "Check environment variables":
	given $home_var defaults to "HOME"
	given $user_var defaults to "USER"

	info "🌍 Environment Variables Check"
	step "Reading environment variables..."

	info "🏠 Home directory: {env($home_var)}"
	info "👤 Current user: {env($user_var, 'unknown')}"
	info "🔧 PATH exists: {env('PATH') != '' ? 'yes' : 'no'}"

	success "Environment check completed!"

task "file operations" means "Demonstrate file system operations":
	requires $target_path
	given $backup_dir defaults to "/tmp"

	info "📁 File System Operations"
	step "Checking file system..."

	info "📄 Target exists: {file exists($target_path)}"
	info "📂 Backup dir exists: {dir exists($backup_dir)}"
	info "🕐 Timestamp: {now.format('2006-01-02-15-04-05')}"

	when file exists(target_path) is "true":
		step "Target file found - ready for operations"
		info "✅ File operations can proceed"

	success "File operations check completed!"

task "deployment info" means "Generate deployment information":
	requires $environment from ["dev", "staging", "production"]
	given $app_name defaults to "myapp"

	info "🚀 Deployment Information Generator"
	step "Generating deployment details..."

	info "📦 Application: {$app_name}"
	info "🌍 Environment: {$environment}"
	info "🏷️  Build ID: {current git commit('short')}-{now.format('20060102-1504')}"
	info "🖥️  Deploy host: {hostname}"
	info "📁 Deploy path: {pwd}/releases/{now.format('20060102-150405')}"

	when environment is "production":
		warn "⚠️  PRODUCTION DEPLOYMENT"
		step "Extra validation for production"
		info "🔒 Security checks enabled"

	success "🎉 Deployment info generated for {$environment}!"

task "backup with timestamp" means "Create timestamped backup":
	requires $source_path
	given $backup_root defaults to "/backups"

	info "💾 Timestamped Backup Creation"
	step "Preparing backup operation..."

	info "📂 Source: {$source_path}"
	info "📁 Backup root: {$backup_root}"
	info "🕐 Timestamp: {now.format('2006-01-02_15-04-05')}"
	info "📦 Backup name: backup-{now.format('2006-01-02_15-04-05')}.tar.gz"
	info "🖥️  Created on: {hostname}"

	if file exists(source_path) is "true":
		step "Source verified - creating backup"
		info "✅ Backup would be created at {$backup_root}/backup-{now.format('2006-01-02_15-04-05')}.tar.gz"
	else:
		error "❌ Source path does not exist: {$source_path}"
		throw "Backup failed - source path not found"

	success "💾 Backup operation completed!"

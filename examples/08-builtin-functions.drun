version: 2.0

task "system info" means "Display comprehensive system information":
	info "ğŸ–¥ï¸  System Information Report"
	step "Gathering system details..."

	info "ğŸ“ Current directory: {pwd}"
	info "ğŸ“‚ Directory name: {pwd('basename')}"
	info "ğŸŒ Hostname: {hostname}"
	info "ğŸ•’ Current time: {now.format('2006-01-02 15:04:05')}"
	info "ğŸ“… Today's date: {now.format('Monday, January 2, 2006')}"

	success "System information gathered successfully!"

task "git info" means "Display git repository information":
	info "ğŸ“‹ Git Repository Information"
	step "Checking git status..."

	info "ğŸ”— Full commit hash: {current git commit}"
	info "ğŸ·ï¸  Short commit hash: {current git commit('short')}"

	success "Git information retrieved!"

task "environment check" means "Check environment variables":
	given $home_var defaults to "HOME"
	given $user_var defaults to "USER"

	info "ğŸŒ Environment Variables Check"
	step "Reading environment variables..."

	info "ğŸ  Home directory: {env($home_var)}"
	info "ğŸ‘¤ Current user: {env($user_var, 'unknown')}"
	info "ğŸ”§ PATH exists: {env('PATH') != '' ? 'yes' : 'no'}"

	success "Environment check completed!"

task "file operations" means "Demonstrate file system operations":
	requires $target_path
	given $backup_dir defaults to "/tmp"

	info "ğŸ“ File System Operations"
	step "Checking file system..."

	info "ğŸ“„ Target exists: {file exists($target_path)}"
	info "ğŸ“‚ Backup dir exists: {dir exists($backup_dir)}"
	info "ğŸ• Timestamp: {now.format('2006-01-02-15-04-05')}"

	when file exists(target_path) is "true":
		step "Target file found - ready for operations"
		info "âœ… File operations can proceed"

	success "File operations check completed!"

task "deployment info" means "Generate deployment information":
	requires $environment from ["dev", "staging", "production"]
	given $app_name defaults to "myapp"

	info "ğŸš€ Deployment Information Generator"
	step "Generating deployment details..."

	info "ğŸ“¦ Application: {$app_name}"
	info "ğŸŒ Environment: {$environment}"
	info "ğŸ·ï¸  Build ID: {current git commit('short')}-{now.format('20060102-1504')}"
	info "ğŸ–¥ï¸  Deploy host: {hostname}"
	info "ğŸ“ Deploy path: {pwd}/releases/{now.format('20060102-150405')}"

	when environment is "production":
		warn "âš ï¸  PRODUCTION DEPLOYMENT"
		step "Extra validation for production"
		info "ğŸ”’ Security checks enabled"

	success "ğŸ‰ Deployment info generated for {$environment}!"

task "backup with timestamp" means "Create timestamped backup":
	requires $source_path
	given $backup_root defaults to "/backups"

	info "ğŸ’¾ Timestamped Backup Creation"
	step "Preparing backup operation..."

	info "ğŸ“‚ Source: {$source_path}"
	info "ğŸ“ Backup root: {$backup_root}"
	info "ğŸ• Timestamp: {now.format('2006-01-02_15-04-05')}"
	info "ğŸ“¦ Backup name: backup-{now.format('2006-01-02_15-04-05')}.tar.gz"
	info "ğŸ–¥ï¸  Created on: {hostname}"

	if file exists(source_path) is "true":
		step "Source verified - creating backup"
		info "âœ… Backup would be created at {$backup_root}/backup-{now.format('2006-01-02_15-04-05')}.tar.gz"
	else:
		error "âŒ Source path does not exist: {$source_path}"
		throw "Backup failed - source path not found"

	success "ğŸ’¾ Backup operation completed!"

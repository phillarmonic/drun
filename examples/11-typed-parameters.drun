version: 2.0

task "basic types" means "Demonstrate basic parameter types":
	given $count as number defaults to "5"
	given $enabled as boolean defaults to "true"
	given $message as string defaults to "Hello World"

	info "ğŸ”¢ Count: {$count}"
	info "âœ… Enabled: {$enabled}"
	info "ğŸ’¬ Message: {$message}"

	if $enabled is "true":
		info "ğŸŸ¢ Feature is enabled!"
	else:
		info "ğŸ”´ Feature is disabled!"

	success "Basic types demonstration completed!"

task "list operations" means "Demonstrate list parameter types":
	given $environments as list defaults to "dev,staging,production"
	given $services as list defaults to "api,web,worker"

	info "ğŸŒ Target environments: {$environments}"
	info "ğŸ”§ Services to deploy: {$services}"

	for each env in environments:
		info "ğŸ“¦ Processing environment: {$env}"

		for each service in services:
			info "  ğŸš€ Deploying {$service} to {$env}"

	success "List operations completed!"

task "validation demo" means "Demonstrate parameter validation":
	requires $port as number
	requires $environment as string from ["dev", "staging", "production"]
	given $timeout as number defaults to "30"
	given $debug as boolean defaults to "false"

	info "ğŸŒ Starting server on port {$port}"
	info "ğŸ·ï¸  Environment: {$environment}"
	info "â±ï¸  Timeout: {$timeout} seconds"
	info "ğŸ› Debug mode: {$debug}"

	when environment is "production":
		warn "âš ï¸  Running in PRODUCTION mode!"
		info "ğŸ”’ Extra security checks enabled"

	when debug is "true":
		info "ğŸ” Debug logging enabled"
		info "ğŸ“Š Performance metrics enabled"

	success "Validation demo completed!"

task "type inference" means "Demonstrate automatic type inference":
	given $count defaults to "42"
	given $enabled defaults to "true"
	given $ratio defaults to "3.14"
	given $tags defaults to "frontend,backend,database"

	info "ğŸ”¢ Count (inferred as number): {$count}"
	info "âœ… Enabled (inferred as boolean): {$enabled}"
	info "ğŸ“Š Ratio (inferred as number): {$ratio}"
	info "ğŸ·ï¸  Tags (inferred as list): {$tags}"

	info "Processing tags:"
	for each $item in $tags:
		info "  ğŸ“Œ Tag: {$item}"

	success "Type inference demonstration completed!"

task "complex example" means "Complex typed parameter example":
	requires $replicas as number
	requires $environment as string from ["dev", "staging", "production"]
	given $services as list defaults to "api,web"
	given $enable_monitoring as boolean defaults to "true"
	given $cpu_limit as number defaults to "1.0"

	info "ğŸš€ Deployment Configuration:"
	info "  ğŸ“Š Replicas: {$replicas}"
	info "  ğŸŒ Environment: {$environment}"
	info "  ğŸ”§ Services: {$services}"
	info "  ğŸ“ˆ Monitoring: {$enable_monitoring}"
	info "  ğŸ’» CPU Limit: {$cpu_limit}"

	when environment is "production":
		info "ğŸ”’ Production deployment detected"

		when replicas < "3":
			warn "âš ï¸  Low replica count for production!"

		when enable_monitoring is "false":
			warn "âš ï¸  Monitoring disabled in production!"

	info "ğŸ“¦ Deploying services:"
	for each service in services:
		info "  ğŸš€ Deploying {$service}..."
		info "    ğŸ“Š Replicas: {$replicas}"
		info "    ğŸ’» CPU Limit: {$cpu_limit}"

		when enable_monitoring is "true":
			info "    ğŸ“ˆ Monitoring enabled for {$service}"

	success "ğŸ‰ Complex deployment completed!"


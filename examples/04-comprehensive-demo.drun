version: 2.0

task "hello" means "Simple hello world":
  info "Hello from drun v2! 🚀"
  success "Basic task completed!"

task "greet" means "Greet someone with customizable title":
  requires name
  given title defaults to "friend"
  
  step "Preparing personalized greeting"
  info "Hello, {title} {name}! Welcome to drun v2."
  success "Greeting delivered to {title} {name}!"

task "deploy" means "Deploy application to environment":
  requires environment from ["dev", "staging", "production"]
  given app_version defaults to "latest"
  given replicas defaults to "3"
  
  step "Starting deployment process"
  info "Deploying version {app_version} to {environment}"
  info "Target replicas: {replicas}"
  info "Environment: {environment}"
  
  step "Validating deployment configuration"
  step "Pushing to {environment} environment"
  step "Scaling to {replicas} replicas"
  
  success "🎉 Deployment to {environment} completed successfully!"
  info "Version {app_version} is now live with {replicas} replicas"

task "backup" means "Create timestamped backup":
  requires source_path
  given backup_name defaults to "backup-2024-01-01"
  given compression defaults to "gzip"
  
  step "Initializing backup process"
  info "Source: {source_path}"
  info "Backup name: {backup_name}"
  info "Compression: {compression}"
  
  step "Creating compressed backup"
  step "Verifying backup integrity"
  
  success "✅ Backup created: {backup_name}.{compression}"

task "test" means "Run comprehensive tests":
  given test_type defaults to "unit"
  given coverage defaults to "80"
  
  step "Setting up test environment"
  info "Running {test_type} tests"
  info "Target coverage: {coverage}%"
  
  step "Executing test suite"
  step "Generating coverage report"
  
  success "🧪 All {test_type} tests passed with {coverage}% coverage!"

task "status" means "Show system status":
  info "🔍 System Status Check"
  step "Checking application health"
  step "Verifying database connectivity"
  step "Monitoring resource usage"
  success "✅ All systems operational!"
